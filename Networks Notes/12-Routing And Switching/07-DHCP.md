## ๐ ุฃููุงู: ูุง ูู DHCPุ

**DHCP (Dynamic Host Configuration Protocol)** ูู ุจุฑูุชูููู ููุณุชุฎุฏู ูุชูุฒูุน ูุนูููุงุช ุงูุดุจูุฉ ุชููุงุฆููุง ููุฃุฌูุฒุฉ ูุซู:

- **IP Address**
- **Subnet Mask**
- **Default Gateway**
- **DNS Server**
---
## โ๏ธ ุซุงููุงู: ุนูููุฉ DORA โ ุฏูุฑุฉ ุนูู DHCP

ุงุณู ุงูุนูููุฉ "DORA" ูู ุงุฎุชุตุงุฑ ูุฃุฑุจุน ุฎุทูุงุช ุจูู ุงูุนููู (Client) ูุงููุฒูุฏ (DHCP Server):

| ุงูุฎุทูุฉ                 | ุงูุชูุณูุฑ                                             |
| ---------------------- | --------------------------------------------------- |
| **D = Discover**       | ูุฑุณู ุงูุนููู ุจุซูุง (Broadcast) ููุจุญุซ ุนู ุฃู ุณูุฑูุฑ DHCP |
| **O = Offer**          | ูุฑุฏ ุงูุณูุฑูุฑ ุจุนุฑุถ IP                                 |
| **R = Request**        | ุงูุนููู ูุทูุจ ุฑุณูููุง ูุฐุง ุงูู IP                       |
| **A = Acknowledgment** | ููุงูู ุงูุณูุฑูุฑ ูููุฑุณูู ุชูุงุตูู ุงูุชูููู                |

### ๐ฅ๏ธ **ูุซุงู ุนููู (ุจุงููุช ุชุฑุงุณุฑ)**:

1. ุงุฑุจุท PC ูุน ุณููุชุด.
2. ุงุฑุจุท ุงูุณููุชุด ุจุฑุงูุชุฑ.    
3. ูุนูู DHCP ุนูู ุงูุฑุงูุชุฑ:

```
Router(config)# interface f0/0

Router(config-if)# ip address 192.168.1.1 255.255.255.0

Router(config-if)# no shutdown

Router(config)# ip dhcp pool MYPOOL

Router(dhcp-config)# network 192.168.1.0 255.255.255.0

Router(dhcp-config)# default-router 192.168.1.1

Router(dhcp-config)# dns-server 8.8.8.8

Router(dhcp-config)# exit

Router(config)# ip dhcp excluded-address 192.168.1.1 192.168.1.10
```
---
## ๐งฉ ุซุงูุซุงู: ุฃููุงุน ุจูุงุก DHCP

### 1. โ DHCP ุจุงุณุชุฎุฏุงู ุงูุฑุงูุชุฑ (Router DHCP)

- ุฌูุฏ ููุดุจูุงุช ุงูุตุบูุฑุฉ.
- ุณูู ุงูุชูููู ูุณุฑูุน.    
- ูุณุชุฎุฏู ุฃูุงูุฑ ููุง ุณุจู ุจุงูุฃุนูู.

### 2. โ DHCP ุจุงุณุชุฎุฏุงู ุณูุฑูุฑ ูุฎุตุต (DHCP Server)

- ุฃูุซุฑ ุงุญุชุฑุงููุง ูุชุญูููุง.
- ููุงุณุจ ููุดุจูุงุช ุงููุจูุฑุฉ (ูุซูุงู: ุดุฑูุงุช).
- ูุชูุญ:
    - ุญุฌุฒ IPs.
    - ุฅุนุฏุงุฏุงุช ููู VLAN.
    - ุชุฎุตูุต DNS ูุบูุฑูุง.

### ๐ฅ๏ธ **ูุซุงู ุนููู (Packet Tracer):**

![[Pasted image 20250709200754.png]]

## ๐งฑ **ุงูุดุจูุฉ ุงูุฃููู (ุจุงุณุชุฎุฏุงู ุงูุฑุงูุชุฑ ูู DHCP Server)**

### ๐ฏ **ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ**:

- **Network**: 192.168.1.0/24
- **Gateway**: 192.168.1.1
- **DNS**: 192.168.1.50
- **Excluded IPs**: ูู 192.168.1.2 ุฅูู 192.168.1.40
- **DHCP Scope Name**: ูุซูุงู `LAN1`

## ๐๏ธ **ุงูุฎุทูุงุช:**

#### โ 1. ุฅุนุฏุงุฏ ุงูุฑุงูุชุฑ:

	ุงุฏุฎู ุนูู ุงูุฑุงูุชุฑ > CLI

```
enable
configure terminal

! ุงุณุชุจุนุงุฏ ุจุนุถ ุงูุนูุงููู
ip dhcp excluded-address 192.168.1.2 192.168.1.40

! ุฅูุดุงุก DHCP Pool
ip dhcp pool LAN1
 network 192.168.1.0 255.255.255.0
 default-router 192.168.1.1
 dns-server 192.168.1.50

! ุฅุนุฏุงุฏ ุนููุงู ุงููุงุฌูุฉ
interface GigabitEthernet0/0
 ip address 192.168.1.1 255.255.255.0
 no shutdown

exit
```

#### โ 2. ุฅุนุฏุงุฏ PC5:

- ูู ูุงูุฐุฉ ุงูุฌูุงุฒ (PC5):
    - Interface โ FastEthernet โ DHCP
    - ุณูุชู ุงุณุชูุงู IP ุชููุงุฆููุง ูู ุงูุฑุงูุชุฑ ุฅุฐุง ูู ุดูุก ูุถุจูุท

## ๐งฑ **ุงูุดุจูุฉ ุงูุซุงููุฉ (ุจุงุณุชุฎุฏุงู DHCP Server ูุณุชูู)**

### ๐ฏ **ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ**:

- **Network**: 10.0.0.0/8
- **Gateway**: 10.0.0.1
- **DNS**: 8.8.8.8
### ๐๏ธ **ุงูุฎุทูุงุช:**

#### โ 1. ุฅุนุฏุงุฏ ุงูุณูุฑูุฑ (Server0):

- ุงูุฒุฑ ูู ูุถุน **ON**
- ุงูุฅุนุฏุงุฏุงุช ููุชููุฉ:

```
Pool Name: LAN2 (ุฃู ุงุณู)
Default Gateway: 10.0.0.1
DNS Server: 8.8.8.8
Starting IP Address: 10.0.0.2
Subnet Mask: 255.0.0.0
Maximum Number of Users: 50 (ูุซูุงู)
```

๐ข ุงุถุบุท **Save** ุจุนุฏ ุฅุฏุฎุงู ุงูุจูุงูุงุช.

### 2. โ **ุชุฃูุฏ ูู ุฃู ุงูุณูุฑูุฑ ููุณู ููููุฃ ูุฏูููุง ุจุดูู ุตุญูุญ**

ุงูุชุญ: `Server > Desktop > IP Configuration`

ุชุฃูุฏ ูู ุงูุชุงูู:

```
IP Address: 10.0.0.1
Subnet Mask: 255.0.0.0
Default Gateway: 10.0.0.1
DNS Server: 8.8.8.8
```

#### โ 2. ุฅุนุฏุงุฏ PC5 (1):

- Interface โ FastEthernet โ DHCP
- ูุฌุจ ุฃู ูุณุชูุจู IP ูู ุงูุณูุฑูุฑ ูุซู 10.0.0.2
#### โ 3. ุฅุนุฏุงุฏ Switch4(1):

ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฎุงุตุฉ ุนูู ุงูุณููุชุดุ ููุท ุชุฃูุฏ ุฃู ุงูุฃุฌูุฒุฉ ูุชุตูุฉ ุจููุณ ุงูุณููุชุด.
## โ **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู:**

- ูู ูู PC ุฌุฑุจ ุชุนูู:
```
ipconfig
ping 8.8.8.8
ping Default Gateway
```

---
---
## ๐ ุฑุงุจุนุงู: DHCP Spoofing โ ุงููุฌูู ุนูู DHCP

### ๐ ูุง ููุ

ูุฌูู ูููู ุจู ุงูููุงุฌู ูู ุฎูุงู:

- ูุถุน **DHCP Server ูุฒูู** ุนูู ุงูุดุจูุฉ.
- ุฅุนุทุงุก **IP ุฎุงุทุฆ** ู**Gateway ูุฒูุฑ** ููุถุญูุฉ.
- ุจุนุฏูุง ูุณุชุทูุน ุงูููุงุฌู ุนูู:
    - **Man-in-the-middle attack**
    - **ุชูุตุช (Sniffing)**
    - **ุฅุนุงุฏุฉ ุชูุฌูู ุงูุถุญูุฉ ูููุงูุน ูุฒููุฉ**

---
## ๐ก ุฎุงูุณุงู: ุงูุญูุงูุฉ ูู DHCP Spoofing

### ๐ ุงูุญู: ุชูููู ุฎุงุตูุฉ DHCP Snooping ุนูู ุงูุณููุชุด

### โ ูุงุฐุง ุชูุนู DHCP Snoopingุ

- ุชููุฒ ุจูู ุงูููุงูุฐ "ุงูููุซููุฉ" (trusted) ู"ุบูุฑ ุงูููุซููุฉ" (untrusted).    
- ุชููุน ุงูุฃุฌูุฒุฉ ุนูู ุงูููุงูุฐ ุบูุฑ ุงูููุซููุฉ ูู ุฅุฑุณุงู ุฑุณุงุฆู DHCP Offer.
### ๐ ุงูุฎุทูุงุช ุงูุนูููุฉ ุนูู ุงูุณููุชุด:
```
Switch(config)# ip dhcp snooping

Switch(config)# ip dhcp snooping vlan 1

! ุญุฏุฏ ุงููููุฐ ุงูููุซูู (ุงูุฐู ูุชุตู ุจุงูุณูุฑูุฑ ุฃู ุงูุฑุงูุชุฑ)
Switch(config)# interface fa0/1

Switch(config-if)# ip dhcp snooping trust

! ุงูููุงูุฐ ุงูุฃุฎุฑู ุชุธู untrusted ุชููุงุฆููุง
```

---
## ๐งช ุณุงุฏุณุงู: ุฃูุซูุฉ ูุงูุนูุฉ ูุชูุงุฑูู Packet Tracer

### ๐ Lab 1: DHCP from Router

1. ุฑุงูุชุฑ โ ุณููุชุด โ 2 PC
2. ูุนูู DHCP ุนูู ุงูุฑุงูุชุฑ.
3. ุชุฃูุฏ ุฃู ูู PC ูุญุตู ุนูู IP ุชููุงุฆููุง.

### ๐ Lab 2: DHCP from Server + VLAN

1. ุณููุชุด ุจู VLAN 10 ูVLAN 20.
2. ุณูุฑูุฑ DHCP ููุตู ุจูููุฐ ููุซูู.
3. ุนุฏูู ุงูุณูุฑูุฑ ูููุฏู DHCP ููู VLAN.    

### ๐ Lab 3: Attack Simulation

1. ุถุน PC ููุซู "ุงูููุงุฌู" ูุน DHCP Server ูููู.
2. ุดุงูุฏ ููู ูุญุตู PC ุขุฎุฑ ุนูู IP ูุฒูู.
3. ูุนูู DHCP Snooping ูุฃุนุฏ ุงููุญุงููุฉ.

## ๐ง ูุตุงุฆุญ ุฅุถุงููุฉ ูููู ุงูููุถูุน ุจุนูู:

- ๐งช ุฌุฑุจ ูู ุณููุงุฑูู ูู Packet Tracer ุจููุณู.
- ๐ ุฑุงูุจ ุฑุณุงุฆู DORA ุจุงุณุชุฎุฏุงู **Wireshark**.
- ๐ก ุชุนูู ููู ูููู ุงูุฏูุฌ ุจูู DHCP Snooping ู**Port Security**.

## ๐งท ููุฎุต ุณุฑูุน

|ุงูุนูุตุฑ|ุงููุฏู|
|---|---|
|DHCP ูู ุงูุฑุงูุชุฑ|ููุงุณุจ ููุดุจูุงุช ุงูุตุบูุฑุฉ|
|DHCP ูู ุณูุฑูุฑ|ุงุญุชุฑุงูู ูุฃูุซุฑ ุชุญูููุง|
|DORA|ุฎุทูุงุช ุงูุชูุงูุถ ุจูู ุงูุฌูุงุฒ ูุงูุณูุฑูุฑ|
|DHCP Spoofing|ูุฌูู ูููุญ IP ูุฒูู|
|DHCP Snooping|ุงูุญูุงูุฉ ููู ุจุชุญุฏูุฏ ุงูููุงูุฐ ุงูููุซููุฉ|

---
	Abdelwahab Shandy
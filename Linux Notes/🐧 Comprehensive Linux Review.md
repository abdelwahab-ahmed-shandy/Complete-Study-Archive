
# 🐧 **مراجعة شاملة للينكس** :

### 🏛️ المقدمة

علم أمن المعلومات يعتمد بشكل كبير على مهارات نظام Linux لأنّه الأكثر استخداماً في الخوادم وأدوات الهجوم والدفاع والفحص.

# 🧭 **أولاً: فهم بيئة لينكس**

### 📌 ما هو لينكس؟

- **لينكس (Linux)** هو نظام تشغيل مفتوح المصدر يشبه إلى حد كبير UNIX.
- يتميز بأنه خفيف، آمن، وقابل للتخصيص بشكل كبير.
- أشهر توزيعاته في مجال الأمن: Kali Linux – Parrot OS – BlackArch.

## 📁 **مكونات نظام التشغيل لينكس**:
|العنصر|الوصف|
|---|---|
|**Kernel**|نواة النظام، تتولى إدارة الذاكرة، العمليات، الأجهزة، وأنظمة الملفات.|
|**Shell**|الواجهة بين المستخدم والنظام. مثل: Bash, Zsh.|
|**Filesystem**|نظام إدارة الملفات (شرح أدناه بالتفصيل).|
|**User Space**|حيث يتم تشغيل البرامج والخدمات والتطبيقات.|

---
# 📁 **ثانيًا: نظام الملفات في لينكس**

### 📁 ما هو نظام الملفات (File System)؟

هو طريقة لتنظيم وتخزين البيانات على وسائط التخزين (مثل الأقراص الصلبة). يقوم بتحديد:

- كيفية تخزين الملفات.
- كيفية الوصول إليها.
- كيفية إدارتها (قراءة، كتابة، حذف، ...).

### 🧱 أنواع أنظمة الملفات في Linux:

|النوع|الوصف|
|---|---|
|**ext2**|أقدم نظام ملفات شهير في Linux – لا يدعم journaling.|
|**ext3**|نسخة مطورة من ext2، تدعم journaling.|
|**ext4**|أكثر شيوعًا الآن – أداء عالي، دعم لحجم ملفات كبير.|
|**xfs**|قوي لأحجام ملفات ضخمة – يستخدم في الخوادم كثيرًا.|
|**btrfs**|حديث، يدعم ميزات مثل snapshots، وضغط البيانات.|
|**vfat** / **ntfs**|لأنظمة Windows – تستخدم لتبادل البيانات بين Linux وWindows.|

### 🌲 الهيكل الهرمي لنظام الملفات (Filesystem Hierarchy)

نظام Linux ليس مثل Windows (C:\ و D:). بل يتم تنظيم الملفات في شكل **شجرة جذرية** تبدأ من `/`.

#### أهم الأدلة (Directories):

|الدليل|معناه|
|---|---|
|`/`|الجذر الرئيسي لكل النظام|
|`/bin`|أوامر النظام الأساسية (مثل: `ls`, `cp`)|
|`/boot`|ملفات الإقلاع (kernel, grub...)|
|`/dev`|ملفات الأجهزة (مثل القرص الصلب: `/dev/sda`)|
|`/etc`|ملفات الإعدادات والكونفيج|
|`/home`|مجلدات المستخدمين|
|`/lib`|المكتبات التي تستخدمها البرامج|
|`/media`|الأقراص الخارجية عند توصيلها|
|`/mnt`|نقطة ربط مؤقتة لتوصيل ملفات النظام الأخرى|
|`/opt`|برامج خارجية منصبة يدويًا|
|`/proc`|معلومات النظام الحية (مجلد وهمي)|
|`/root`|مجلد المستخدم الجذر (root)|
|`/run`|معلومات وقت التشغيل|
|`/sbin`|أوامر النظام الخاصة بالإدارة|
|`/tmp`|ملفات مؤقتة|
|`/usr`|برامج ومكتبات للمستخدم|
|`/var`|ملفات متغيرة (logs, cache...)|

---
# 🧑‍💻 **ثالثًا: أهم أوامر لينكس الأساسية**

في هذا القسم، هنتعلم **أهم الأوامر** اللي لازم تكون حافظها وبتستخدمها بمرونة في **بيئة الطرفية (Terminal)**، لأنها الأساس في أي مجال أمني أو شبكي.

### 📁 أوامر التنقل داخل النظام:

| الأمر  | الوظيفة                | مثال                    |
| ------ | ---------------------- | ----------------------- |
| `pwd`  | يعرض المسار الحالي     | `pwd`                   |
| `cd`   | الانتقال بين المجلدات  | `cd /home/user/Desktop` |
| `ls`   | عرض محتوى المجلد       | `ls -la`                |
| `tree` | عرض المجلدات بشكل شجري | `tree /home`            |

### 📄 أوامر التعامل مع الملفات والمجلدات:

| الأمر   | الوظيفة                | مثال                           |
| ------- | ---------------------- | ------------------------------ |
| `touch` | إنشاء ملف فارغ         | `touch test.txt`               |
| `mkdir` | إنشاء مجلد جديد        | `mkdir folder`                 |
| `rm`    | حذف ملف أو مجلد        | `rm file.txt` / `rm -r folder` |
| `cp`    | نسخ ملف أو مجلد        | `cp file.txt /tmp`             |
| `mv`    | نقل أو إعادة تسمية ملف | `mv old.txt new.txt`           |

### 🛠️ أوامر قراءة وتعديل الملفات:

| الأمر           | الوظيفة                   | مثال                   |
| --------------- | ------------------------- | ---------------------- |
| `cat`           | عرض محتوى ملف             | `cat file.txt`         |
| `less` / `more` | عرض محتوى ملف طويل        | `less /var/log/syslog` |
| `nano`          | محرر نصوص بسيط            | `nano file.txt`        |
| `vim`           | محرر نصوص متقدم           | `vim file.txt`         |
| `head` / `tail` | عرض أول/آخر سطور من الملف | `tail -n 20 file.txt`  |

### 🔍 أوامر البحث:

| الأمر    | الوظيفة                           | مثال                           |
| -------- | --------------------------------- | ------------------------------ |
| `find`   | البحث عن ملفات                    | `find / -name file.txt`        |
| `locate` | البحث السريع (يحتاج قاعدة بيانات) | `locate passwd`                |
| `grep`   | البحث داخل الملفات                | `grep "error" /var/log/syslog` |
### 📂 أوامر البحث المتقدم:

| الأمر            | الوظيفة                         | مثال                        |
| ---------------- | ------------------------------- | --------------------------- |
| `grep -r "كلمة"` | البحث داخل كل الملفات في مجلد   | `grep -r "password" /etc/`  |
| `awk`            | تحليل النصوص في الأعمدة         | `awk '{print $1}' file.txt` |
| `cut`            | قص أعمدة من ملفات               | `cut -d':' -f1 /etc/passwd` |
| `xargs`          | تنفيذ أوامر على ناتج أوامر أخرى | `cat list.txt               |

### 🔐 أوامر صلاحيات الملفات والمستخدمين:

| الأمر    | الوظيفة                         | مثال                       |
| -------- | ------------------------------- | -------------------------- |
| `chmod`  | تغيير صلاحيات ملف               | `chmod 755 script.sh`      |
| `chown`  | تغيير مالك الملف                | `chown root:root file.txt` |
| `whoami` | عرض المستخدم الحالي             | `whoami`                   |
| `id`     | عرض معلومات المستخدم والمجموعات | `id`                       |

### 📦 أوامر الحزم (Debian-based مثل Kali, Ubuntu):

| الأمر         | الوظيفة           | مثال                    |
| ------------- | ----------------- | ----------------------- |
| `apt update`  | تحديث قائمة الحزم | `sudo apt update`       |
| `apt upgrade` | ترقية الحزم       | `sudo apt upgrade`      |
| `apt install` | تثبيت برنامج      | `sudo apt install nmap` |
| `dpkg -i`     | تثبيت حزمة .deb   | `sudo dpkg -i file.deb` |

### 🌐 أوامر الشبكات المهمة:

| الأمر               | الوظيفة               | مثال                    |
| ------------------- | --------------------- | ----------------------- |
| `ifconfig` / `ip a` | عرض كروت الشبكة       | `ip a`                  |
| `ping`              | اختبار الاتصال        | `ping google.com`       |
| `netstat` / `ss`    | عرض المنافذ المفتوحة  | `ss -tuln`              |
| `traceroute`        | تتبع المسار إلى عنوان | `traceroute google.com` |
| `nslookup` / `dig`  | استعلام DNS           | `nslookup facebook.com` |
### 🌐 أوامر الشبكة المتقدمة:

|الأمر|الوظيفة|مثال|
|---|---|---|
|`curl`|جلب بيانات من عنوان URL|`curl http://example.com`|
|`wget`|تحميل ملفات من الإنترنت|`wget http://example.com/file.txt`|
|`arp`|عرض جدول ARP|`arp -a`|
|`ip route`|عرض الجدول التوجيهي|`ip route show`|
|`nmap`|فحص الشبكة (تحتاج تثبيت)|`nmap -sV 192.168.1.1`|
### 🔥 أوامر الصلاحيات والجذر:

| الأمر  | الوظيفة                  | مثال                   |
| ------ | ------------------------ | ---------------------- |
| `sudo` | تنفيذ أمر بصلاحيات الجذر | `sudo apt update`      |
| `su`   | الدخول كجذر              | `su` ثم كتابة الباسورد |

### 📦 أوامر أرشفة وضغط الملفات:

| الأمر             | الوظيفة        | مثال                           |
| ----------------- | -------------- | ------------------------------ |
| `tar`             | أرشفة ملفات    | `tar -cvf archive.tar folder/` |
| `gzip` / `gunzip` | ضغط وفك ضغط    | `gzip file.txt`                |
| `unzip`           | فك ضغط ملف zip | `unzip file.zip`               |
### 🧠 أوامر النظام System & Process Management

|الأمر|الوظيفة|مثال|
|---|---|---|
|`top`|عرض العمليات الجارية واستهلاك الموارد|`top`|
|`htop`|نسخة محسنة من `top` (قد تحتاج تثبيت)|`htop`|
|`ps aux`|عرض العمليات الجارية بشكل مفصل|`ps aux`|
|`kill`|إنهاء عملية معينة|`kill 1234` (رقم PID)|
|`killall`|إنهاء كل العمليات من نوع معين|`killall firefox`|
|`uptime`|عرض مدة تشغيل النظام|`uptime`|
|`free -h`|عرض الذاكرة (RAM) المستخدمة|`free -h`|
|`df -h`|عرض المساحة المتوفرة في الأقراص|`df -h`|
|`du -sh folder`|حساب حجم مجلد|`du -sh /var/log`|

### 🔧 أوامر إدارة الخدمات Services

| الأمر        | الوظيفة                 | مثال                       |
| ------------ | ----------------------- | -------------------------- |
| `systemctl`  | إدارة الخدمات (Systemd) | `systemctl status apache2` |
| `service`    | إدارة الخدمات (قديم)    | `service ssh restart`      |
| `journalctl` | عرض لوجات النظام        | `journalctl -xe`           |

### 🔐 أوامر متعلقة بالأمان والحماية:

| الأمر         | الوظيفة                         | مثال          |
| ------------- | ------------------------------- | ------------- |
| `passwd`      | تغيير كلمة المرور               | `passwd user` |
| `iptables`    | جدار الحماية                    | `iptables -L` |
| `ufw`         | جدار ناري مبسط (Ubuntu)         | `ufw status`  |
| `sudo visudo` | تعديل ملف صلاحيات sudo بشكل آمن | `sudo visudo` |
### 🧪 أوامر أدوات الحماية والاختبار:

| الأداة        | الاستخدام                    | التثبيت                      |
| ------------- | ---------------------------- | ---------------------------- |
| `tcpdump`     | التنصت على الشبكة (Sniffing) | `sudo apt install tcpdump`   |
| `wireshark`   | تحليل الشبكات رسوميًا        | `sudo apt install wireshark` |
| `netcat (nc)` | فحص الاتصالات وفتح بورت      | `nc -lvp 4444`               |
| `whois`       | استعلام عن معلومات نطاق      | `whois facebook.com`         |

### 📦 أوامر إدارة المهام المجدولة:

| الأمر        | الوظيفة                  | مثال                    |
| ------------ | ------------------------ | ----------------------- |
| `crontab -e` | فتح مهام مجدولة للمستخدم | `crontab -e`            |
| `at`         | جدولة مهمة لمرة واحدة    | `echo "ls"              |
| `cron`       | خدمة المهام المجدولة     | `systemctl status cron` |

### 📚 أوامر المساعدة والتعليم:

| الأمر    | الوظيفة                   | مثال         |
| -------- | ------------------------- | ------------ |
| `man`    | فتح دليل (manual) لأي أمر | `man ls`     |
| `--help` | عرض المساعدة للأمر        | `ls --help`  |
| `info`   | نسخة مفصلة من المساعدة    | `info grep`  |
| `whatis` | وصف سريع لأي أمر          | `whatis ps`  |
| `which`  | تحديد مكان تنفيذ الأمر    | `which nmap` |

---
# 🧬 رابعا : أساسيات أمن المعلومات على لينكس

### 🔐 **1. صلاحيات الوصول (Access Permissions)**

#### 📌 مبدأ الأقل صلاحية - Principle of Least Privilege

- هذا المبدأ يعني أن كل مستخدم أو خدمة يجب أن تحصل على **الحد الأدنى من الصلاحيات** التي تحتاجها لأداء عملها فقط.

- مثال: لا تعطي مستخدم صلاحية `root` ما لم يكن يحتاجها بالفعل.

- ⚠️ تقليل الصلاحيات يقلل من خطر تنفيذ أكواد ضارة أو أوامر مدمّرة.

#### 🧱 أنواع صلاحيات الملفات:

- **r** : قراءة الملف.

- **w** : كتابة على الملف.

- **x** : تنفيذ الملف (للسكريبتات أو البرامج).

#### 🔧 SUID / SGID:

- **SUID (Set User ID):** يجعل الملف ينفذ بصلاحيات مالكه (عادة root).

    - مثال: أمر `passwd` يحمل SUID لتعديل `/etc/shadow`.
        
    - افحص ذلك:

        bash
    
        CopyEdit
    
        `ls -l /usr/bin/passwd`
        
- **SGID (Set Group ID):** يشبه SUID، لكنه يعمل على المجموعة.

---

### 🔍 **2. مراقبة النظام (System Monitoring)**

#### 📂 فحص ملفات الـ Logs

- ملفات الـ logs تسجل كل شيء يحدث داخل النظام من تسجيل دخول، محاولات فشل، تشغيل خدمات... إلخ.

- أشهر ملفات الـ logs:
    - `/var/log/auth.log`: لتتبع محاولات الدخول.
    
    - `/var/log/syslog`: لتسجيل أنشطة النظام العامة.
    
    - `/var/log/kern.log`: لنواة النظام.

#### 🔍 أوامر مهمة:
```
sudo tail -f /var/log/auth.log

sudo grep "Failed password" /var/log/auth.log

sudo less /var/log/syslog
```

--- 
### 📁 **3. حماية الملفات (File Protection)**

#### 🔐 التشفير باستخدام GPG (GNU Privacy Guard)

- GPG أداة لتشفير وفك تشفير الملفات باستخدام مفاتيح خاصة وعامة.
##### 📌 خطوات تشفير ملف:
```
gpg -c secret.txt     # تشفير بكلمة سر
```
##### 📌 فك التشفير:
```
gpg secret.txt.gpg
```
##### 📌 إنشاء مفتاح GPG:
```
gpg --gen-key
```

---
### 💣 **4. إدارة الثغرات وفحص النظام**

#### أدوات فحص النظام بحثًا عن ثغرات أو Backdoors:

✅ **Lynis** – فاحص شامل لتقييم الأمان:

```
sudo apt install lynis sudo lynis audit system
```

✅ **chkrootkit** – لفحص وجود Rootkits:

```
sudo apt install chkrootkit sudo chkrootkit
```

✅ **rkhunter** – Rootkit Hunter:

```
sudo apt install rkhunter sudo rkhunter --check
```

🧠 تأكد من تحديث القواعد:
```
sudo rkhunter --update
```

---
### 🛡️ **5. جدار الحماية (Firewall Configuration)**

#### 🔐 أداة UFW (Uncomplicated Firewall):

- واجهة سهلة لـ `iptables`.

##### 📌 خطوات استخدام UFW:
```
sudo apt install ufw sudo ufw enable sudo ufw status verbose sudo ufw allow ssh sudo ufw deny 23     # لحظر Telnet
```
#### 🔧 البديل المتقدم: iptables
```
sudo iptables -L       # عرض القواعد sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT sudo iptables -A INPUT -j DROP
```

---
### 📡 **6. الشبكة الآمنة (Secure Networking)**

#### 🔒 استخدام SSH بدلاً من Telnet

- SSH يقوم بتشفير الاتصال بالكامل.
```
sudo systemctl status ssh ssh user@ip_address
```
##### ⚠️ نصائح:

- استخدم مفاتيح RSA بدل كلمة السر.
- غيّر المنفذ الافتراضي من 22.
- عطل تسجيل الدخول للمستخدم root.

#### 🔐 إعداد VPN (مثل OpenVPN أو WireGuard)

- VPN مهم لتأمين الاتصال خاصة أثناء استخدام الشبكات العامة.
#### 👀 مراقبة Sniffing (باستخدام tcpdump / Wireshark)

- **tcpdump** أداة لالتقاط وتحليل الحزم الشبكية:
```
sudo tcpdump -i eth0 sudo tcpdump -nn port 80
```

- **Wireshark** واجهة رسومية لتحليل الترافيك:
```
sudo apt install wireshark
```

---
## ✅ نصائح إضافية:

- لا تعمل كـ root بشكل دائم.
- قم بتحديث النظام دوريًا:
```
sudo apt update && sudo apt upgrade
```
- راقب العمليات الغريبة:
```
ps aux | grep suspicious
```

### 📌 خلاصة

| المجال        | الأدوات والأوامر الأساسية         |
| ------------- | --------------------------------- |
| الوصول        | `chmod`, `chown`, SUID/SGID       |
| المراقبة      | `tail`, `grep`, `journalctl`      |
| التشفير       | `gpg`, `openssl`                  |
| الفحص الأمني  | `lynis`, `chkrootkit`, `rkhunter` |
| الجدار الناري | `ufw`, `iptables`                 |
| الشبكة        | `ssh`, `tcpdump`, `wireshark`     |

---
---
---
### ✅ **خطة العمل بعد المراجعة**

1. ✅ إتقان الأساسيات (استخدام التيرمنال – الملفات – المستخدمين)
2. ✅ التدريب العملي (CTF, TryHackMe, OverTheWire)
3. ✅ تعلم إدارة النظام والشبكة
4. ✅ البدء في تحديات الأمن السيبراني المبنية على لينكس

---
`Abdelwahab Shandy`



